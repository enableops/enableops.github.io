(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[671],{3249:function(t){var e="https://source.developers.google.com/p/enableops-io/r/init",n="enableops.md",o="enableops.motd",i="https://ssh.cloud.google.com/cloudshell/editor?shellonly=true&cloudshell_print="+encodeURI(o)+"&cloudshell_git_repo="+encodeURI(e)+"&cloudshell_tutorial="+encodeURI(n);t.exports={settingsUrl:"/v1/auth/settings",profileUrl:"/v1/users/me/profile",projectsUrl:"/v1/users/me/project_ids",deploymentsUrl:"/v1/users/me/deployments/",cloudShellUrl:i,cloudShellRepo:e,cloudShellTutorial:n,cloudShellMotd:o,logoutUrl:"/v1/auth/logout"}},3241:function(t,e,n){"use strict";n.r(e),n.d(e,{contentTitle:function(){return $},controller:function(){return nt},default:function(){return it},frontMatter:function(){return Q},metadata:function(){return tt},toc:function(){return et}});var o=n(7462),i=n(3366),a=n(7294),r=n(3905),s=n(5885),l=n(5068),c=n(8987),u=n(6447),d=n(1496),p=n(4098),h=n.n(p),g=n(3645),m=n.n(g),f=n(5058),S=n(3321),v=n(657),k=n(1425),y=n(6514),w=n(8951),b=n(7645),I=n(4776),C=a.forwardRef((function(t,e){return a.createElement(I.Z,(0,o.Z)({direction:"up",ref:e},t))})),j=function(t){function e(e){return t.call(this,e)||this}return(0,l.Z)(e,t),e.prototype.render=function(){return a.createElement("div",null,a.createElement(v.Z,{open:this.props.open,TransitionComponent:C,keepMounted:!0,onClose:this.props.handleDialogClose,"aria-describedby":"alert-dialog-slide-description"},a.createElement(b.Z,null,"Profile information and list of GCP Projects"),a.createElement(y.Z,null,a.createElement(w.Z,{id:"alert-dialog-slide-description"},"We need this data only for the configuration and deployment process, we won't store any of your personal information on our servers. Feel free to ",a.createElement("a",{href:"https://myaccount.google.com/permissions",target:"__blank"},"clear us out from permissions")," after setup.")),a.createElement(k.Z,null,a.createElement(S.Z,{onClick:this.props.handleDialogClose},"Cancel setup"),a.createElement(S.Z,{onClick:this.props.handleAgree},"Proceed"))))},e}(a.Component),E=function(t){function e(e){var n;return(n=t.call(this,e)||this).getSettings=function(){var t=n.props.settings.baseUrl+n.props.settings.settingsUrl;h()(t).then(n.handleErrors).then((function(t){return t.json()})).then((function(t){n.setState({authSettings:t})})).catch(console.log)},n.closeDialog=function(){n.setState({showingDialog:!1})},n.openDialog=function(){n.setState({showingDialog:!0})},n.onGoodGoogleResponse=function(t){n.closeDialog(),h()(n.state.authSettings.token_url,{method:"POST",credentials:"include",body:new URLSearchParams({code:t.code,redirect_uri:window.location.origin})}).then(n.handleErrors).then((function(t){return t.json()})).then((function(t){n.props.cookiesController.set("csfr_token",t.csrf_token,{path:"/",secure:!0,httpOnly:!1,sameSite:"strict"}),n.props.updateStatus()})).catch(console.log)},n.onBadGoogleResponse=function(t){n.closeDialog(),console.log(t.error)},n.handleOpen=function(t){return function(){t()}},n.renderButton=function(t){return a.createElement("div",null,a.createElement(c.Z,{color:"primary",variant:"contained",disableElevation:!0,onClick:n.openDialog,loading:t.disabled||n.state.loading,loadingPosition:"end",endIcon:a.createElement(f.Z,null)},"Sign in with google"),a.createElement(j,{open:n.state.showingDialog,handleDialogClose:n.closeDialog,handleAgree:n.handleOpen(t.onClick)}))},n.state={authSettings:null,showingDialog:!1,loading:!1},n}(0,l.Z)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.getSettings()},n.handleErrors=function(t){if(!t.ok)throw Error(t.statusText);return t},n.googleLogin=function(){var t=this.state.authSettings;return a.createElement(m(),{buttonText:"Login",responseType:"code",render:this.renderButton,onSuccess:this.onGoodGoogleResponse,onFailure:this.onBadGoogleResponse,cookiePolicy:"single_host_origin",clientId:t.client_id,accessType:t.access_type,prompt:t.prompt,scope:t.scope})},n.render=function(){return a.createElement("div",null,this.state.authSettings?this.googleLogin(this.state.settigs):null)},e}(a.Component),N=n(9661),P=(0,d.ZP)("div")((function(t){var e=t.theme;return Object.assign({},e.typography.button,{backgroundColor:e.palette.background.paper,padding:e.spacing(1)})})),Z=function(t){function e(e){var n;return(n=t.call(this,e)||this).logout=function(){var t=n.props.settings.baseUrl+n.props.settings.logoutUrl;fetch(t,{credentials:"include"}).then(n.handleErrors).then((function(){n.props.cookiesController.remove("csfr_token",{path:"/"}),n.props.updateStatus()})).catch(console.log)},n.fetchUserInfo=function(){var t=n.props.settings.baseUrl+n.props.settings.profileUrl;fetch(t,{credentials:"include",headers:{Authorization:"CSFR "+n.props.cookiesController.get("csfr_token")}}).then(n.handleErrors).then((function(t){return t.json()})).then((function(t){n.setState({profile:t})})).catch((function(t){console.log(t),n.logout()}))},n.state={profile:null},n}(0,l.Z)(e,t);var n=e.prototype;return n.handleErrors=function(t){if(!t.ok)throw Error(t.statusText);return t},n.componentDidMount=function(){this.fetchUserInfo()},n.render=function(){var t,e;return a.createElement(u.Z,{direction:"row",spacing:2},a.createElement(u.Z,{direction:"row"},this.state.profile?a.createElement(N.Z,{alt:null!=(t=this.state.profile.given_name)?t:"User",src:null!=(e=this.state.profile.picture)?e:""}):null,this.state.profile?a.createElement(P,null,this.state.profile.email):null),this.state.profile?a.createElement(S.Z,{onClick:this.logout,variant:"outlined"},"Log out"):a.createElement(c.Z,{loading:!0,variant:"text"},"Loading"))},e}(a.Component),D=(0,d.ZP)("div")((function(t){var e=t.theme;return Object.assign({},e.typography.button,{backgroundColor:e.palette.background.paper,padding:e.spacing(1)})})),_=function(t){function e(e){var n;return(n=t.call(this,e)||this).updateSigninStatus=function(){var t=n.cookies.get("csfr_token")?"in":"out";n.setState({signStatus:t});var e=Object.assign({},n.controller.state);e.loginState=t,n.controller.broadcastNewState(e)},n.controller=e.controller,n.cookies=n.controller.cookies,n.settings=n.controller.settings,n.state={signStatus:""},n}(0,l.Z)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.updateSigninStatus()},n.render=function(){var t=this;return a.createElement(u.Z,{direction:"row",spacing:2},a.createElement(D,null,"Sign in:"),function(){switch(t.state.signStatus){case"out":return a.createElement(E,{cookiesController:t.cookies,updateStatus:t.updateSigninStatus,settings:t.settings});case"in":return a.createElement(Z,{cookiesController:t.cookies,updateStatus:t.updateSigninStatus,settings:t.settings});default:return a.createElement(c.Z,{loading:!0,variant:"text"},"Loading")}}())},e}(a.Component),T=n(7357),U=n(3841),x=n(5819),O=n(4054),G=n(6815),R=n(1692),M=function(t){function e(e){var n;return(n=t.call(this,e)||this).fetchProjects=function(){var t=n.settings.baseUrl+n.settings.projectsUrl;fetch(t,{method:"GET",credentials:"include",headers:{Authorization:"CSFR "+n.cookies.get("csfr_token")}}).then((function(t){return t.json()})).then((function(t){return n.setState({projects:t})})).catch(console.log)},n.updateSignInState=function(t){"in"===t.loginState&&"in"!=n.state.singInState.loginState&&n.fetchProjects(),n.setState({singInState:t})},n.handleChange=function(t){var e=Object.assign({},n.state.singInState);e.selectedProjectId=t.target.value,n.setState({singInState:e},(function(){n.controller.broadcastNewState(Object.assign({},n.state.singInState))}))},n.controller=e.controller,n.cookies=n.controller.cookies,n.settings=n.controller.settings,n.controller.addCallback(n.updateSignInState),n.state={singInState:{loginState:null,selectedProjectId:"",configurationStatus:null},projects:[]},n}(0,l.Z)(e,t);var n=e.prototype;return n.handleErrors=function(t){if(!t.ok)throw Error(t.statusText);return t},n.render=function(){return a.createElement(T.Z,{sx:{minWidth:120,maxWidth:400}},a.createElement(O.Z,{disabled:"in"!=this.state.singInState.loginState,fullWidth:!0},a.createElement(U.Z,{id:"project-select-label"},"Select Cloud Project"),a.createElement(R.Z,{labelId:"project-select-label",id:"project-select",value:this.state.singInState.selectedProjectId,label:"Select Cloud Project",onChange:this.handleChange},a.createElement(x.Z,{value:""},a.createElement("em",null,"None")),this.state.projects.map((function(t){return a.createElement(x.Z,{key:t.id,value:t.id},t.name)}))),a.createElement(G.Z,null,"in"===this.state.singInState.loginState?" ":"Please sign in first")))},e}(a.Component),z=n(1458),A=n(2979),L=n(7036),F=function(t){function e(e){var n;return(n=t.call(this,e)||this).updateProgress=function(t){var e=Object.assign({},n.state.singInState);e.configurationStatus=t,n.setState({singInState:e},(function(){n.controller.broadcastNewState(Object.assign({},n.state.singInState))}))},n.fetchConfigurationStatus=function(){var t=n.settings.baseUrl+n.settings.deploymentsUrl;fetch(t,{method:"GET",credentials:"include",headers:{Authorization:"CSFR "+n.cookies.get("csfr_token")}}).then((function(t){return t.json()})).then((function(t){var e=t.find((function(t){return t.project_id===n.state.singInState.selectedProjectId})),o=null;if(e){var i=e.status;o=0,"CREATED"===i?o=5:"DISPATCHED"===i?o=15:"ADDED"===i?o=45:"CONFIGURED"===i&&(o=100),console.log(o)}[null,0,100].includes(o)&&clearInterval(n.interval),n.updateProgress(o)})).catch(console.log)},n.watchNewProject=function(){n.updateProgress(null),n.fetchConfigurationStatus(),n.interval=setInterval(n.fetchConfigurationStatus,5e3)},n.updateSignInState=function(t){var e=t.selectedProjectId!=n.state.singInState.selectedProjectId;n.setState({singInState:t},(function(){e&&n.watchNewProject()}))},n.handleChange=function(t){var e=Object.assign({},n.state.singInState);e.selectedProjectId=t.target.value,n.setState({singInState:e},(function(){n.controller.broadcastNewState(Object.assign({},n.state.singInState))}))},n.dispatchConfiguration=function(){var t=n.settings.baseUrl+n.settings.deploymentsUrl,e={project_id:n.state.singInState.selectedProjectId};fetch(t,{method:"POST",credentials:"include",headers:{Authorization:"CSFR "+n.cookies.get("csfr_token"),"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(){return n.watchNewProject()})).catch(console.log)},n.controller=e.controller,n.cookies=n.controller.cookies,n.settings=n.controller.settings,n.controller.addCallback(n.updateSignInState),n.state={singInState:{loginState:null,selectedProjectId:"",configurationStatus:null},projects:[]},n}(0,l.Z)(e,t);var n=e.prototype;return n.handleErrors=function(t){if(!t.ok)throw Error(t.statusText);return t},n.render=function(){return a.createElement(u.Z,{direction:"column",alignItems:"flex-start",spacing:2},a.createElement(c.Z,{loading:null!=this.state.singInState.configurationStatus&&100!=this.state.singInState.configurationStatus,disabled:!this.state.singInState.selectedProjectId||100===this.state.singInState.configurationStatus,loadingPosition:this.state.singInState.selectedProjectId?"end":null,onClick:this.dispatchConfiguration,endIcon:this.state.singInState.selectedProjectId?100===this.state.singInState.configurationStatus?a.createElement(L.Z,null):a.createElement(A.Z,null):null,variant:this.state.singInState.selectedProjectId?100===this.state.singInState.configurationStatus?"outlined":"contained":"outlined",disableElevation:!0},this.state.singInState.selectedProjectId?"Prepare configuration":"Please select project first"),null!=this.state.singInState.configurationStatus?a.createElement(T.Z,{sx:{width:"100%"}},a.createElement(z.Z,{variant:"determinate",value:this.state.singInState.configurationStatus,color:100===this.state.singInState.configurationStatus?"success":0===this.state.singInState.configurationStatus?"error":"primary"})):null)},e}(a.Component),B=n(0),W=function(t){function e(e){var n;return(n=t.call(this,e)||this).updateSignInState=function(t){n.setState({singInState:t})},n.controller=e.controller,n.cookies=n.controller.cookies,n.settings=n.controller.settings,n.controller.addCallback(n.updateSignInState),n.state={singInState:{loginState:null,selectedProjectId:"",configurationStatus:null},projects:[]},n}return(0,l.Z)(e,t),e.prototype.render=function(){return a.createElement(S.Z,{target:"_blank",color:"success",variant:100===this.state.singInState.configurationStatus?"contained":"outlined",disableElevation:!0,disabled:100!=this.state.singInState.configurationStatus,endIcon:100===this.state.singInState.configurationStatus?a.createElement(B.Z,null):null,href:this.settings.cloudShellUrl},100===this.state.singInState.configurationStatus?"Start deployment":"Waiting for configuration")},e}(a.Component),H=n(9055),X=["components"],q=n(3249),K={toc:[],settings:q};function V(t){var e=t.components,n=(0,i.Z)(t,X);return(0,r.kt)("wrapper",(0,o.Z)({},K,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)(H.Z,{className:"language-shell",mdxType:"CodeBlock"},'cloudshell_open \\\n  --repo_url "'+q.cloudShellRepo+'" \\\n  --print_file "'+q.cloudShellMotd+'" \\\n  --page "shell" \\\n  --tutorial "'+q.cloudShellTutorial+'" \\\n  --force_new_clone'))}V.isMDXComponent=!0;var Y=n(5406),J=["components"],Q={sidebar_position:1,title:"Setup guide"},$=void 0,tt={unversionedId:"intro",id:"intro",title:"Setup guide",description:"SignUpController,",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/docs/intro",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Setup guide"},sidebar:"tutorialSidebar"},et=[{value:"\u2601\ufe0f Check your Cloud project",id:"\ufe0f-check-your-cloud-project",children:[],level:2},{value:"\u26f3\ufe0f Authentification",id:"\ufe0f-authentification",children:[],level:2},{value:"\ud83c\udf96 Select project",id:"-select-project",children:[],level:2},{value:"\ud83e\uddec Configure enableOps",id:"-configure-enableops",children:[],level:2},{value:"\ud83d\ude80 Deploy your cluster",id:"-deploy-your-cluster",children:[],level:2}],nt=new function(){var t=this;this.addCallback=function(e){t.handlers.push(e)},this.broadcastNewState=function(e){t.handlers.forEach((function(t){return t(e)}))},this.cookies=new s.Z,this.settings=n(3249),this.settings.baseUrl="https://api.enableops.io",this.state={loginState:null,selectedProjectId:"",configurationStatus:null},this.handlers=[]},ot={toc:et,controller:nt};function it(t){var e=t.components,n=(0,i.Z)(t,J);return(0,r.kt)("wrapper",(0,o.Z)({},ot,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"From zero to \ud83d\ude80 fully operational cloud environment for production (GitOps) and development (CI/CD) without prior DevOps knowledge with our \ud83e\udd16 ",(0,r.kt)("em",{parentName:"p"},"interactive guide"),"."),(0,r.kt)("h2",{id:"\ufe0f-check-your-cloud-project"},"\u2601\ufe0f Check your Cloud project"),(0,r.kt)("p",null,"First things first - the cloud! You have to make sure you have an access to already created ",(0,r.kt)("em",{parentName:"p"},"GCP (Google Cloud Platform)")," Project. This is our main requirement for you, and we don't mind if it will be project with lots of people and data there or just freshly created one."),(0,r.kt)("p",null,"GCP can be a bit owerwhelming at start, so here is an introductionary video about it."),(0,r.kt)(Y.Z,{videoId:"GKEk1FzAN1A",opts:{width:"100%",height:"400"},mdxType:"YouTube"}),(0,r.kt)("p",null,"Don't worry, you don't neet to be a GCP genius to use enableOps, you just need project and we will get you covered.  "),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Billing Warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Make sure you have your billing in project set up. Otherwise we will not be able to activate Kubernetes API and deployment will fail."))),(0,r.kt)("h2",{id:"\ufe0f-authentification"},"\u26f3\ufe0f Authentification"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Phew, now with the hardest part behind us we can finilize the setup. Seriously, we have only 3 small steps and 1 copy-paste shell command left.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"We are security first")," = we won't be asking you for direct access to your cluster and it's you who will be running deployment commands, for this you (and your project) will need to have access to our modules, therefore we need to authenticate your ",(0,r.kt)("inlineCode",{parentName:"p"},"google accout")," and read a ",(0,r.kt)("inlineCode",{parentName:"p"},"list of projects")," available to you. "),(0,r.kt)(_,{controller:nt,mdxType:"LoginStep"}),(0,r.kt)("br",null),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"We need this data only for the configuration and deployment process, we won't store any of your personal information on our servers. Feel free to ",(0,r.kt)("a",{parentName:"p",href:"https://myaccount.google.com/permissions"},"clear us out from permissions")," after setup."))),(0,r.kt)("h2",{id:"-select-project"},"\ud83c\udf96 Select project"),(0,r.kt)("p",null,"Choose the project which you will be deploying your resources to. Make sure you have all the rights to enable APIs and add Service accounts. The ",(0,r.kt)("em",{parentName:"p"},"Owner")," level rights will do. "),(0,r.kt)(M,{controller:nt,mdxType:"SelectStep"}),(0,r.kt)("h2",{id:"-configure-enableops"},"\ud83e\uddec Configure enableOps"),(0,r.kt)("p",null,"Now just hit the button, sit back and relax. It will take some time to compile configuration files for your project to let you deploy it with one line in shell. "),(0,r.kt)(F,{controller:nt,mdxType:"ConfigureStep"}),(0,r.kt)("h2",{id:"-deploy-your-cluster"},"\ud83d\ude80 Deploy your cluster"),(0,r.kt)("p",null,"Clicking this ",(0,r.kt)("em",{parentName:"p"},"green button")," will start your personal and secure Google Cloud Shell environment where you will be able to deploy the cluster. Don't worry, once opened, Google Cloud Shell will show additional tutorial for you to follow."),(0,r.kt)(W,{controller:nt,mdxType:"DeployStep"}),(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"use the same account")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Make sure you are using the same Google account in Google Cloud Shell as the one you've used to sign in on this page. If you have more than one account and for ",(0,r.kt)("em",{parentName:"p"},"some reason")," Cloud Shell decided to use just not the right one - no worries, just click on your avatar in the upper right corner to switch it and enter the command in the newly opened shell:"),(0,r.kt)(V,{mdxType:"CloudShellCommand"}),(0,r.kt)("p",{parentName:"div"},"And continue with tutorial there \ud83d\udd96"))),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"By the way, ",(0,r.kt)("a",{parentName:"em",href:"https://cloud.google.com/shell#features"},"Google Cloud Shell is a very handy service"),", it's free and will give you a quick way to try new things without installing anything on your local machine. We recommend to have it in your sleeve.")))}it.isMDXComponent=!0}}]);